<div class="carousel-container">
  <div class="carousel-wrapper">
    <div class="testimonial-card" [class.transitioning]="isTransitioning">
      <div class="testimonial-content">
        <div class="quote-icon">"</div>
        <p class="testimonial-text">{{ currentTestimonial.content }}</p>
      </div>
      <div class="testimonial-author">
        <div class="author-avatar">
          <img [src]="currentTestimonial.avatar" [alt]="currentTestimonial.name" 
               (error)="onImageError($event)" 
               [style.display]="imageLoaded ? 'block' : 'none'">
          <div class="avatar-fallback" [style.display]="!imageLoaded ? 'flex' : 'none'">
            {{ currentTestimonial.name.charAt(0) }}
          </div>
        </div>
        <div class="author-info">
          <h4 class="author-name">{{ currentTestimonial.name }}</h4>
          <p class="author-role">{{ currentTestimonial.role }}</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Navigation Controls -->
  <div class="carousel-controls">
    <button 
      class="control-btn prev-btn" 
      (click)="previous()"
      [disabled]="isTransitioning"
      aria-label="Témoignage précédent">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M15 18l-6-6 6-6"/>
      </svg>
    </button>
    
    <div class="dots-container">
      <button 
        *ngFor="let testimonial of testimonials; let i = index"
        class="dot" 
        [class.active]="i === currentIndex"
        (click)="goToSlide(i)"
        [attr.aria-label]="'Aller au témoignage ' + (i + 1)">
      </button>
    </div>
    
    <button 
      class="control-btn next-btn" 
      (click)="next()"
      [disabled]="isTransitioning"
      aria-label="Témoignage suivant">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor">
        <path d="M9 18l6-6-6-6"/>
      </svg>
    </button>
  </div>
</div>
